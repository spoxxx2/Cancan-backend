<!DOCTYPE html>
<html>
<head>
    <title>CanCan Admin - Multi-Scan v2026</title>
    <style>
        body { background: #0a0a0a; color: #00ff41; font-family: 'Courier New', monospace; padding: 20px; }
        .panel { border: 1px solid #00ff41; padding: 20px; background: #111; box-shadow: 0 0 10px #00ff41; }
        button { background: #00ff41; color: black; border: none; padding: 10px 20px; cursor: pointer; font-weight: bold; }
        #log { margin-top: 20px; font-size: 0.9em; color: #008f11; }
    </style>
</head>
<body>
    <div class="panel">
        <h2>[SYSTEM] DIGITAL TWIN BATCH PROCESSOR</h2>
        <p>LOCATION: Bakersfield, CA | CALIBRATION: 2026-01-14</p>
        <hr color="#00ff41">
        <input type="file" id="debris-upload" multiple accept="image/*">
        <button onclick="startBatch()">INITIALize SCAN</button>
        <div id="log"></div>
    </div>

    <script>
    async function startBatch() {
        const files = document.getElementById('debris-upload').files;
        const log = document.getElementById('log');
        if (files.length === 0) return;

        const formData = new FormData();
        for (let file of files) { formData.append('files', file); }
        
        // Hardwired Calibration Data
        formData.append('humidity', '89');
        formData.append('gain', '1.042');

        log.innerHTML = "> Connecting to YOLOv12 + ViT Backend...<br>";

        try {
            const response = await fetch('http://localhost:8000/batch-scan', {
                method: 'POST',
                body: formData
            });
            const data = await response.json();
            log.innerHTML += `> SUCCESS: ${data.batch_count} Twins Generated.<br>`;
            log.innerHTML += `> TOTAL CARBON CREDITS: ${data.total_credits}<br>`;
        } catch (e) {
            log.innerHTML += "> ERROR: Backend Offline. Run 'python main.py' in Termux.<br>";
        }
    }
    </script>
</body>
</html>
